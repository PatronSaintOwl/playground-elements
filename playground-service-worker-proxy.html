<!doctype html><script type="module">/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
(async()=>{try{parent.window.console.warn("Playground sandbox is executing with the same origin as its parent.","This is a security risk.","https://github.com/google/playground-elements#sandbox-security")}catch{}const{url:e,scope:t,port:a}=await new Promise((e=>{const t=a=>{1===a.data.type&&(window.removeEventListener("message",t),e(a.data))};window.addEventListener("message",t)})),n=await navigator.serviceWorker.register(new URL(e,import.meta.url).href,{scope:t}),r=()=>{var e,t;return null!==(t=null!==(e=n.installing)&&void 0!==e?e:n.waiting)&&void 0!==t?t:n.active};let s=null;const o=async(e=!1)=>{const t=r();if(!e&&t===s)return;if(s=t,null===t)return void console.error("No playground service worker found.");if(await(async e=>{if("activated"!==e.state)return new Promise((t=>{const a=new AbortController;e.addEventListener("statechange",(()=>{"activated"===e.state&&(t(),a.abort())}),{signal:a.signal})}))})(t),t!==s)return;const{port1:n,port2:o}=new MessageChannel,i={type:3,port:n};a.postMessage(i,[n]);const d={type:2,port:o};t.postMessage(d,[o])};o(),n.addEventListener("updatefound",(()=>{o()})),navigator.serviceWorker.addEventListener("message",(e=>{e.source===s&&5===e.data.type&&o(!0)})),window.addEventListener("message",(async e=>{if(6===e.data.type){const e=r();await n.update(),r()===e&&console.error("Playground service worker update failed.")}}))})();</script>